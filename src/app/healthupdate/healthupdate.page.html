<ion-header>
  <ion-toolbar>
      <ion-buttons slot="start">
          <ion-back-button icon="chevron-back-outline"></ion-back-button>
      </ion-buttons>
      <ion-title id="title">Update Health Records</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="bg_img">

  <div id="container">
    <ion-grid>

      <ion-row class="ion-align-items-center" id="medkit">
        <ion-col size="12">
          <p id="name" style="color:#fff;text-align: center;margin-top:20px;">{{name}}</p>
        </ion-col>
      </ion-row>


      <ion-row class="ion-align-items-center" id="medkit">
        <ion-col size="12">
          <ion-segment [(ngModel)]="events_tab" color="primary">
            <ion-segment-button value="visits">
              <ion-label><ion-icon name="home"></ion-icon> Office Visits</ion-label>
            </ion-segment-button>
            <ion-segment-button value="allergy">
              <ion-label><ion-icon name="medical"></ion-icon> Allergies</ion-label>
            </ion-segment-button>
            <ion-segment-button value="immune">
              <ion-label><ion-icon name="medkit"></ion-icon> Immunization</ion-label>
            </ion-segment-button>
        </ion-segment>
        </ion-col>

        <ion-col size="12">
          <ion-segment [(ngModel)]="events_tab" color="primary">
            <ion-segment-button value="test">
              <ion-label><ion-icon name="bookmarks"></ion-icon> Test Results</ion-label>
            </ion-segment-button>
            <ion-segment-button value="stat">
              <ion-label><ion-icon name="analytics"></ion-icon> Health Statistics</ion-label>
            </ion-segment-button>
            <ion-segment-button value="prescrip">
              <ion-label><ion-icon name="bookmark"></ion-icon> Prescription</ion-label>
            </ion-segment-button>          
        </ion-segment>
        </ion-col>

        <ion-col size="12">
          <ion-segment [(ngModel)]="events_tab" color="primary">
            <ion-segment-button value="cond">
              <ion-label><ion-icon name="document"></ion-icon> Ongoin Health Condition</ion-label>
            </ion-segment-button>
            <ion-segment-button value="cert">
              <ion-label><ion-icon name="card"></ion-icon> Covid19 Certificate</ion-label>
            </ion-segment-button>
        </ion-segment>
        </ion-col>
      </ion-row>


      <ion-row>
         <ion-col size="12">
          <div [ngSwitch]="events_tab">


            <!---------- Office Visits ---------->
            <div class="form2" *ngSwitchCase="'visits'">
              <p style="text-align: center;color: #fff;">Office Visits</p>
            
            <form #parentForm="ngForm" (submit)="submitForm(parentForm)">
              <ion-list lines="none">
                <ion-item lines="none" style="display:none;">
                  <div class="item_inner d-flex">
                      <ion-icon class="zmdi ion-text-start"></ion-icon>
                      <div class="input_field">
                          <ion-label>User ID</ion-label>
                          <ion-input name="myname1" type="text" 
                          value="{{userid}}" [(ngModel)]="userid"></ion-input>
                      </div>
                  </div>
                </ion-item>
                <ng-template ngFor let-form [ngForOf]="mainForm.formFields" let-index="index" let-isLast="last"> 
                  <ion-item lines="none">
                      <div class="item_inner d-flex">
                          <ion-icon class="zmdi ion-text-start"></ion-icon>
                          <div class="input_field">
                              <ion-label>Date of Visit</ion-label>
                              <!--<ion-input name="myname2_{{ form.id }}" type="form.formField2.type" [(ngModel)]="form.formField2.value" required="true"></ion-input>-->
                              <ion-datetime displayFormat="YYYY-MM-DD" pickerFormat="DD-MMM-YY" name="myname2_{{ form.id }}" type="form.formField2.type" [(ngModel)]="form.formField2.value" required="true"></ion-datetime>
                              
                          </div>
                      </div>
                  </ion-item>
                  <div>
                    <p *ngIf="parentForm.submitted && !form.formField2.value" style="color:#787878;"></p>
                  </div>
                  <ion-item lines="none">
                      <div class="item_inner d-flex">
                          <ion-icon class="zmdi ion-text-start"></ion-icon> 
                          <div class="input_field">
                                <ion-label>Place of Visit</ion-label>
                              <ion-input name="myname3_{{ form.id }}" type="form.formField3.type" [(ngModel)]="form.formField3.value" required="true"></ion-input>
                          </div>
                      </div>
                  </ion-item>
                  <div>
                    <p *ngIf="parentForm.submitted && !form.formField3.value" style="color:#921919;">All fields are required</p>
                  </div>
                  <hr style="border-bottom: 1px solid rgba(44,193,239,0.35);">
                </ng-template>
                <ion-grid>
                  <ion-row>
                    <ion-col size="6">
                         <ion-button size="" expand="block" class="mybutton" (click)="addForm()" [disabled]="(!parentForm.form.valid)">
                        <ion-icon name="add"></ion-icon>Add</ion-button>
                    </ion-col>
                    <ion-col size="6">
                        <ion-button size="" expand="block" class="mybutton" (click)="removeForm(index)">
                        <ion-icon name="remove"></ion-icon>Remove</ion-button>
                    </ion-col>
                  </ion-row>
               </ion-grid>
                <br>
              <ion-button size="" expand="block" class="mybutton2" type="submit" [disabled]="disabledButton">
                  Submit</ion-button>
              </ion-list>
            </form>            
            </div>
            <!---------- Office Visits End ----------->


            <!---------- Allergy Starts ---------->
            <div class="form2" *ngSwitchCase="'allergy'">
              <p style="text-align: center;color: #fff;">Allergies</p>
            
            <form #parentForm="ngForm" (submit)="submitAllergy(parentForm)">
              <ion-list lines="none">
                <ion-item lines="none" style="display:none;">
                  <div class="item_inner d-flex">
                      <ion-icon class="zmdi ion-text-start"></ion-icon>
                      <div class="input_field">
                          <ion-label>User ID</ion-label>
                          <ion-input name="myname1" type="text" 
                          value="{{userid}}" [(ngModel)]="userid"></ion-input>
                      </div>
                  </div>
                </ion-item>
                <ng-template ngFor let-form [ngForOf]="mainAllergyForm.formFields" let-index="index" let-isLast="last"> 
                  <ion-item lines="none">
                      <div class="item_inner d-flex">
                          <ion-icon class="zmdi ion-text-start"></ion-icon> 
                          <div class="input_field">
                                <ion-label>Allergy Name</ion-label>
                              <ion-input name="myname3_{{ form.id }}" type="form.formField3.type" [(ngModel)]="form.formField3.value" required="true"></ion-input>
                          </div>
                      </div>
                  </ion-item>
                  <div>
                    <p *ngIf="parentForm.submitted && !form.formField3.value" style="color:#921919;">All fields are required</p>
                  </div>
                  <hr style="border-bottom: 1px solid rgba(44,193,239,0.35);">
                </ng-template>
                <ion-grid>
                  <ion-row>
                    <ion-col size="6">
                         <ion-button size="" expand="block" class="mybutton" (click)="addAllergy()" [disabled]="(!parentForm.form.valid)">
                        <ion-icon name="add"></ion-icon>Add</ion-button>
                    </ion-col>
                    <ion-col size="6">
                        <ion-button size="" expand="block" class="mybutton" (click)="removeAllergy(index)">
                        <ion-icon name="remove"></ion-icon>Remove</ion-button>
                    </ion-col>
                  </ion-row>
               </ion-grid>
                <br>
              <ion-button size="" expand="block" class="mybutton2" type="submit" [disabled]="disabledAllergyButton">
                  Submit</ion-button>
              </ion-list>
            </form>            
            </div>
            <!---------- Allergy Ends ----------->



           </div>
         </ion-col>
      </ion-row>


    </ion-grid>
    
  </div>

</ion-content>

